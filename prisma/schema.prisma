generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
}

model Order {
  id              String       @id @default(cuid())
  createdAt       DateTime     @default(now())
  status          String
  name            String?
  email           String?
  phone           String?
  document        String?
  city            String?
  address         String?
  notes           String?
  total           Int
  mpPreferenceId  String?
  items           OrderItem[]
  downloadAccess  DownloadAccess[]
}

model Experience {
  id        String   @id @default(cuid())
  slug      String   @unique
  title     String
  summary   String
  details   String
  discountPercent Int @default(0)
  coupons   Json
  intro     String
  highlights Json
  bullets   Json
  outcomes  Json
  images    Json
  icon      String
  price     Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Element {
  id        String   @id @default(cuid())
  slug      String   @unique
  name      String
  category  String
  categoryDescription String?
  description String
  details   String
  discountPercent Int @default(0)
  coupons   Json
  image     String
  images    Json
  price     Int
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model ElementCategory {
  id          String   @id @default(cuid())
  title       String   @unique
  description String
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model Download {
  id          String   @id @default(cuid())
  slug        String   @unique
  title       String
  description String
  details     String?
  showOnHome  Boolean  @default(false)
  access      String
  fileUrl     String
  image       String
  price       Int
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model OrderItem {
  id          String   @id @default(cuid())
  order       Order    @relation(fields: [orderId], references: [id])
  orderId     String
  productSlug String
  title       String
  price       Int
  quantity    Int
}

model Cart {
  id        String     @id @default(cuid())
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  email     String?
  items     CartItem[]
}

model CartItem {
  id          String  @id @default(cuid())
  cart        Cart    @relation(fields: [cartId], references: [id])
  cartId      String
  productSlug String
  title       String
  price       Int
  quantity    Int
}

model DownloadAccess {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  fileSlug  String
  email     String?
  name      String?
  order     Order?   @relation(fields: [orderId], references: [id])
  orderId   String?
}
